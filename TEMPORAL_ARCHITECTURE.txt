TEMPORAL CLUSTER ARCHITECTURE
=============================

ğŸ”´ TU AIRFLOW + CELERY ACTUAL:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Scheduler     â”‚    â”‚  Redis Broker   â”‚    â”‚ Celery Worker 1 â”‚
â”‚   (SPOF)        â”‚â”€â”€â”€â–¶â”‚   Queue A       â”‚â”€â”€â”€â–¶â”‚ Solo ve Queue A â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   Queue B       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚   Queue C       â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”€â”€â”€â–¶â”‚ Celery Worker 2 â”‚
                                              â”‚ Solo ve Queue B â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âŒ PROBLEMA: Si Scheduler cae â†’ TODO para
âŒ PROBLEMA: Workers solo ven su queue especÃ­fica


ğŸŸ¢ TEMPORAL CLUSTER:
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Load Balancer  â”‚ (Opcional)
                    â”‚   (o Client)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚                     â”‚
        â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Temporal    â”‚â—„â”€â”€â–¶â”‚ Temporal    â”‚â—„â”€â”€â–¶â”‚ Temporal    â”‚
â”‚ Server 1    â”‚    â”‚ Server 2    â”‚    â”‚ Server 3    â”‚
â”‚ :7233       â”‚    â”‚ :7233       â”‚    â”‚ :7233       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   PostgreSQL DB     â”‚
              â”‚   (Estado Global    â”‚
              â”‚    Compartido)      â”‚
              â”‚                     â”‚
              â”‚ â€¢ Workflows         â”‚
              â”‚ â€¢ Activities        â”‚
              â”‚ â€¢ Task Queues       â”‚
              â”‚ â€¢ Timers            â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â–²
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                  â”‚                  â”‚
       â–¼                  â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Worker A    â”‚    â”‚ Worker B    â”‚    â”‚ Worker C    â”‚
â”‚ Conectado   â”‚    â”‚ Conectado   â”‚    â”‚ Conectado   â”‚
â”‚ a Server 1  â”‚    â”‚ a Server 2  â”‚    â”‚ a Server 3  â”‚
â”‚             â”‚    â”‚             â”‚    â”‚             â”‚
â”‚ VE TODAS    â”‚    â”‚ VE TODAS    â”‚    â”‚ VE TODAS    â”‚
â”‚ LAS TAREAS  â”‚    â”‚ LAS TAREAS  â”‚    â”‚ LAS TAREAS  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… VENTAJA: Sin SPOF - cualquier server puede caer
âœ… VENTAJA: Workers ven todas las tareas desde cualquier server


FLUJO DE EJECUCIÃ“N:
==================

1. WORKFLOW LLEGA:
   Client â†’ Load Balancer â†’ Server 2 â†’ PostgreSQL
   
2. WORKFLOW EN DB:
   PostgreSQL: [Workflow_A: PENDING, Queue: "networking-queue"]
   
3. WORKERS POLLING:
   Worker A â†’ Server 1 â†’ PostgreSQL â†’ "Â¿Hay tareas en networking-queue?"
   Worker B â†’ Server 2 â†’ PostgreSQL â†’ "Â¿Hay tareas en networking-queue?"  
   Worker C â†’ Server 3 â†’ PostgreSQL â†’ "Â¿Hay tareas en networking-queue?"
   
4. PRIMER WORKER GANA:
   Worker A â†’ "SÃ­, toma Workflow_A" â†’ PostgreSQL: [Workflow_A: RUNNING]
   Worker B â†’ "No, ya tomada"
   Worker C â†’ "No, ya tomada"
   
5. SI SERVER 2 CAE:
   Worker B â†’ Falla conexiÃ³n â†’ Se reconecta a Server 1 o 3
   Workflow_A sigue ejecutÃ¡ndose en Worker A
   Estado persiste en PostgreSQL


COMPARACIÃ“N FINAL:
==================

CELERY:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Scheduler   â”‚    â”‚ Redis       â”‚    â”‚ Worker      â”‚
â”‚ (SPOF)      â”‚â”€â”€â”€â–¶â”‚ (SPOF)      â”‚â”€â”€â”€â–¶â”‚ (Escalable) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TEMPORAL:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Server      â”‚    â”‚ PostgreSQL  â”‚    â”‚ Worker      â”‚
â”‚ (Escalable) â”‚â—„â”€â”€â–¶â”‚ (Escalable) â”‚â—„â”€â”€â”€â”‚ (Escalable) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RESULTADO: TODO es escalable, sin SPOF